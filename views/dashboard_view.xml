<?xml version="1.0" encoding="utf-8"?>
<flectra>
    <data>
        <!-- Delete old dashboard action if exists -->
        <delete id="action_construction_dashboard" model="ir.actions.client"/>
        <delete id="action_construction_dashboard" model="ir.actions.act_window"/>
        
        <record id="view_construction_dashboard_form" model="ir.ui.view">
            <field name="name">construction.dashboard.form</field>
            <field name="model">construction.dashboard</field>
            <field name="arch" type="xml">
                <form string="Construction Statistics" create="0" delete="0">
                    <sheet>
                        <div class="oe_button_box" name="button_box">
                            <button class="oe_stat_button" type="object" name="action_view_sites" icon="fa-building-o">
                                <field name="total_site" widget="statinfo" string="Total Sites"/>
                            </button>
                            <button class="oe_stat_button" type="object" name="action_view_job_costing" icon="fa-calendar-o">
                                <field name="planning_site" widget="statinfo" string="Planning Sites"/>
                            </button>
                            <button class="oe_stat_button" type="object" name="action_view_construction_details" icon="fa-file-text-o">
                                <field name="job_order" widget="statinfo" string="Job Orders"/>
                            </button>
                            <button class="oe_stat_button" type="object" name="action_view_in_progress" icon="fa-spinner">
                                <field name="site_in_progress" widget="statinfo" string="In Progress"/>
                            </button>
                            <button class="oe_stat_button" type="object" name="action_view_completed" icon="fa-check-circle">
                                <field name="complete_site" widget="statinfo" string="Completed Sites"/>
                            </button>
                        </div>
                        <group>
                            <group string="Site Status">
                                <field name="job_order" readonly="1"/>
                                <field name="document_verified" readonly="1"/>
                                <field name="site_in_progress" readonly="1"/>
                                <field name="complete_site" readonly="1"/>
                                <field name="close_site" readonly="1"/>
                                <field name="cancel_site" readonly="1"/>
                            </group>
                            <group string="Project Statistics">
                                <field name="total_projects" readonly="1"/>
                                <field name="total_sub_projects" readonly="1"/>
                                <field name="active_phases" readonly="1"/>
                                <field name="active_work_orders" readonly="1"/>
                            </group>
                        </group>
                        <group>
                            <group string="Material &amp; Equipment">
                                <field name="total_equipment_po" readonly="1"/>
                                <field name="total_material_po" readonly="1"/>
                                <field name="total_requisitions" readonly="1"/>
                            </group>
                            <group string="Financial">
                                <field name="total_budget" readonly="1"/>
                                <field name="total_spent" readonly="1"/>
                                <field name="remaining_budget" readonly="1"/>
                            </group>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="action_construction_dashboard" model="ir.actions.act_window">
            <field name="name">Statistics</field>
            <field name="res_model">construction.dashboard</field>
            <field name="view_mode">form</field>
            <field name="target">current</field>
            <field name="view_id" ref="view_construction_dashboard_form"/>
        </record>
    </data>
</flectra>

